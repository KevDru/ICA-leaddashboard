<div class="kanban-board">
  @if (columnLegend().length) {
    <div class="legend-row">
      @for (item of columnLegend(); track item.id) {
        <div class="legend-chip" [style.--col]="item.color" (click)="scrollToColumn(item.id)">
          <span class="swatch" [style.background]="item.color">
             <span class="legend-count">{{ item.count }}</span>
          </span>
          <span class="legend-name">{{ item.name }}</span>
         
        </div>
      }
    </div>
  }

  <div class="columns-wrapper">
    <div class="columns">
      @for (column of columns(); track column.id) {
        <app-kanban-column
          [column]="column"
          [leads]="leadsMap().get(column.id) || []"
          [connectedDropLists]="connectedDropLists()"
          (dropEvent)="drop($event, column.id)"
          (reloadEvent)="loadColumns()"
          (moveColumnEvent)="moveColumn(column, $event)">
        </app-kanban-column>
      }
      @empty {
        <p>Geen kolommen gevonden</p>
      }
    </div>

    <button class="add-column-btn" (click)="promptCreateColumn()" title="Voeg nieuwe kolom toe">
      +
    </button>
  </div>
</div>
